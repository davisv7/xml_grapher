<!DOCTYPE hmtl>

<html>

  <head>

    <!-- Chart.js CDN script -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>

    <style>
      canvas{
        height: 300px !important;
        width: 500px !important;
      }
    </style>

  </head>

  <body>

    <h1>Datasets</h1>
    <!-- make a canvas for each graph, with unique id  -->
    <% datasets.forEach(function(dataset,index){ %>
      <% var id = "chart"+index %>
      <canvas id=<%= id %>></canvas>
          <% }) %>


    <script>
      <%# need to use json.stringify so js can use node variables %>
      var ds = <%- JSON.stringify(datasets) %>;
      for (var i = 0; i<ds.length;i++ ){
          var ctx = document.getElementById('chart'+i).getContext('2d');
          var myLineChart = new Chart(ctx, {
              type: 'line',
              data: {
                labels: Array.from(Array(ds[i].length).keys()),
                datasets: [
                  {
                    label: 'Values at Index',
                    data: ds[i],
                    fill: false,
                    borderColor: 'rgba(255, 99, 132, 1)',
                    backgroundColor: 'rgba(255, 99, 132, 0.5)',
                    borderWidth: 1
                  }
                ]
              },
              options: {
                responsive:false
              }
          });
        }
    </script>

  </body>

</html>
